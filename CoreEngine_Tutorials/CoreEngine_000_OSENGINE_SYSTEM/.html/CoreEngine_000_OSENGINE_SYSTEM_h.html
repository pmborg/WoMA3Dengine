<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>World of Middle Age (WoMA) Tutorial file</title>
	<script type="text/javascript" src="scripts/shCore.js"></script>
	<script type="text/javascript" src="scripts/shBrushCpp.js"></script>
	<link type="text/css" rel="stylesheet" href="styles/shCore.css"/>
	<!--link type="text/css" rel="stylesheet" href="styles/shThemeDefault.css"/-->
	<link type="text/css" rel="stylesheet" href="styles/pmborg.css"/>
	
	<script type="text/javascript">
		SyntaxHighlighter.config.clipboardSwf = 'scripts/clipboard.swf';
		SyntaxHighlighter.all();
	</script>
</head>

<body>
<h1>Tutorial CoreEngine 000 - OSENGINE SYSTEM</h1>
<p>
Copyright(C) 2013 - 2023 Pedro Miguel Borges &lt;pmborg@yahoo.com&gt;<br>
This file is part of the WorldOfMiddleAge project.<br>
<br>
The WorldOfMiddleAge project files can not be copied or distributed for comercial use<br>
without the express written permission of Pedro Miguel Borges [pmborg@yahoo.com]<br>
You may not alter or remove any copyright or other notice from copies of the content.<br>
The content contained in this file is provided only for educational and informational purposes.<br>
</p>
<hr>
<h2>platform.h</h2>
<pre class="brush: cpp;">// --------------------------------------------------------------------------------------------
// Filename: platform.h
// --------------------------------------------------------------------------------------------
// World of Middle Age (WoMA) - 3D Multi-Platform ENGINE 2023
// --------------------------------------------------------------------------------------------
// Copyright(C) 2013 - 2023 Pedro Miguel Borges [pmborg@yahoo.com]
//
// This file is part of the WorldOfMiddleAge project.
//
// The WorldOfMiddleAge project files can not be copied or distributed for comercial use 
// without the express written permission of Pedro Miguel Borges [pmborg@yahoo.com]
// You may not alter or remove any copyright or other notice from copies of the content.
// The content contained in this file is provided only for educational and informational purposes.
// 
// Downloaded from : http://woma.servegame.com
// --------------------------------------------------------------------------------------------
// PURPOSE: Define/Auto-detect all global "target-settings" to compile WOMA project ENGINE
//
// - ONLY DEFINE(s) HERE:
//		NO INCLUDE(s) (except APPLE API & ANDROID API)
//		NO GLOBAL VARIABLE(s)
//
// --------------------------------------------------------------------------------------------
#pragma once

#pragma warning( disable : 4005 )	// Disable warning C4005: '' : macro redefinition
#pragma warning( disable : 4067 )	// Disable warning C4067: unexpected tokens following preprocessor directive - expected a newline

#define disable_bin_compile_message_for_WINDOWS_PLATFORM_X64

// -------------------------------------------------------------------------------------------
// CHECK: X86 vx X64:
// -------------------------------------------------------------------------------------------
#if defined(__i386__) || defined(i386) || defined(_M_IX86) || defined(_X86_) || defined(__THW_INTEL)
	#define CPU_X86 //CPU: 32bits!
#endif

// [WIN]: Check Windows, if we are compiling in 64bits:
#if defined(_WIN64) && !defined X64
	#define X64	//CPU: 64bits!
#endif

// [GCC]: Check Linux, if we are compiling in 64bits:
#if __GNUC__
	#if __x86_64__ || __ppc64__
		#define X64 //CPU: 64bits!
	#endif
#endif

// -------------------------------------------------------------------------------------------
// ASSERT: X86 vx X64 VALID COMPILATION OPTIONS:
// -------------------------------------------------------------------------------------------
#if defined CPU_X86 && defined X64
	static_assert(false, "Can't be X86 and X64 at the same time!");
#endif
#if !defined CPU_X86 && !defined X64
	static_assert(false, "At least one X86 or X64 need to be defined!");
#endif

// -------------------------------------------------------------------------------------------
// CHECK: Intel Intrinsics: SSE, SSE2, AVX, AVX2, AVX-512, etc...
// -------------------------------------------------------------------------------------------
// The Intel Intrinsics provide access to many Intel instructions - including Intel� SSE, AVX, AVX-512, and more,
// without the need to write assembly code: 

#if !defined(_XM_NO_INTRINSICS_) && defined _MSC_VER
	// -------------------------------------------------------------------------------------------
	// Select Advanced MATH-LIB based on which CPU X86 Generation we are TARGETTING:
	// GET COMPILATION OPTION SELECTED - C++/Code Generation: SAMPLE: 
	// - Advanced Vector Extensions 512 (/arch:AVX512)
	// - Advanced Vector Extensions 2 (/arch:AVX2)
	// ...
	// -------------------------------------------------------------------------------------------
	#ifdef __AVX512F__ || defined __AVX512__	//AVX512 (Core i7/i9-7xxxX Skylake-X) (2017)  TARGET CODE: WIN10 64b+AVX512 API:DX12 (Level DX12.x)
		//To be compiled in: VS2017
		#include <zmmintrin.h>					// #include <mmintrin.h> + #include <emmintrin.h>
	#elif defined (__AVX2__)					//AVX2	 (i3/5/7 Haswell)	      = (Q2 2013) TARGET CODE: WIN10 64b+AVX2	API:DX12 (Level DX12.x)
		#define _XM_AVX2_INTRINSICS_
		#include <immintrin.h>					//#include <wmmintrin.h>
	#elif defined (__AVX__)						//AVX	 (i3/5/7 Sandy Bridge)    = (Q3 2011) TARGET CODE: WIN7  64b+AVX	API:DX11 (Level DX11)
		#define _XM_AVX_INTRINSICS_
		#include <immintrin.h>					//#include <wmmintrin.h>
	#elif defined (__AES__)						//AES-NI						  = (2008)
		#include <wmmintrin.h>					//#include <nmmintrin.h>
	#elif defined (__SSE4A__)					// AMD Only
		#include <ammintrin.h>					// AMD Only
	#elif defined (__SSE42__)					//SSE42 (i7 Nehalem)			  = (Nov 2008)
		#include <nmmintrin.h>					//#include <smmintrin.h>
	#elif defined (__SSE41__)					//SSE41 (Penryn microarchitecture)= (2007/2008)
		#include <smmintrin.h>					//#include <tmmintrin.h>
	#elif defined (__SSE3__)					//SSE3 (Pentium 4 Prescott)		  = (April 2005)
		#include <tmmintrin.h>					//#include <pmmintrin.h>
	#elif defined (_M_X64) || defined (_M_AMD64)//SSE2 x64 (Pentium 4F)		      = (Fev 2005)TARGET CODE: WIN7  64b+SSE2 API:DX11 (Level DX9, DX10 or DX10.1)
		#define SSE2_ONLY
		#define _XM_SSE_INTRINSICS_
		#include <pmmintrin.h>					//#include <emmintrin.h>
	#elif defined (_M_IX86_FP) && _M_IX86_FP >= 2//SSE2 x32	(Pentium 4)			  = (Nov 2000) TARGET CODE: WINXP 32b+SSE2 API:DX9 / API:OPENGL 3.3+
		#define SSE2_ONLY
		#define _XM_SSE_INTRINSICS_
		#include <emmintrin.h>					//#include <xmmintrin.h>
	#elif defined _M_IX86_FP && _M_IX86_FP==1	//SSE x32	(Pentium - III Katmai)= (Fev 1999) Target: WINXP 32b+SSE
		// SSE
		#define _XM_SSE_INTRINSICS_
		#include <xmmintrin.h>					//#include <mmintrin.h>
		static_assert(false, "This Target is not valid for WOMA3D Engine");
	#elif defined __I86__ == 6					//Pentium - II					  = (May 1996) Target: Win98 x86+32b
		#include <mmintrin.h>					//MMX
		static_assert(false, "This Target is not valid for WOMA3D Engine");
	#elif defined __I86__ == 5					//Pentium - I					  = (Ago 1995) Target: MS-DOS 6.0 16b + Win95
		#include <mmintrin.h>					//MMX
		static_assert(false, "This Target is not valid for WOMA3D Engine");
	#elif defined __i486__						//IA-32		(CPU: 486)			  = (Jun 1991) Target: MS-DOS 5.0 16b + Windows 3.x
		static_assert(false, "This Target is not valid for WOMA3D Engine");
	#elif defined __i386__						//IA-32		(CPU: 386)			  = (Nov 1989) Target: MS-DOS 3.31 16b + DOS/4GW
		static_assert(false, "This Target is not valid for WOMA3D Engine");
	#else										//x86 � 286 16-bit				  = (Nov 1987) Target: MS-DOS 3.31 16b
		static_assert(false, "This Target is not valid for WOMA3D Engine");
	#endif
#endif

#ifdef _XM_NO_INTRINSICS_ // This is for 32bits Builds.
	#define m128_f32 vector4_f32
#endif

// -------------------------------------------------------------------------------------------
// ASSERT: VALID COMPILATION OPTIONS: Intel Intrinsics: SSE, SSE2, AVX, AVX2, AVX-512, etc...
// -------------------------------------------------------------------------------------------
#if defined _MSC_VER
  #ifdef X64
	#if defined SSE2_ONLY
		// Make sure that AVX Instruction is Used (Fast Code!)
		#if defined __AVX__ || defined __AVX2__
			static_assert(false, "AVX1/2 should be disabled!");
		#endif
	#else
		// Make sure that AVX Instruction is Used (Fast Code!)
		#if !defined __AVX2__
			static_assert(false, "AVX2 should be enabled!");
		#endif
	#endif
  #else 
	// Allow 32Bits Builds to Run on P4 CPU's Since: 2001+
	#if defined __AVX__ || defined __AVX2__
		static_assert(false, "AVX1/2 should be disabled!");
	#endif

		static_assert(_M_IX86_FP == 2, "SSE2 instructions should be enabled!");
  #endif
#endif


// -------------------------------------------------------------------------------------------
//	CHECK for ARM version (INSPIRED)
// -------------------------------------------------------------------------------------------
#if defined(__arm__) || defined(__thumb__) || defined(_ARM) || defined(_M_ARM) || defined(_M_ARM64) || defined(__aarch64__)
	#define CPU_ARM32	//FOR: ANDROID_PLATFORM
#elseif defined(__LP64__) || defined(_LP64) || defined(__arm64) || defined(__arm64__) || defined(_M_ARM64) || defined(__aarch64__)
	#define CPU_ARM64	//FOR: ANDROID_PLATFORM
#endif

// -------------------------------------------------------------------------------------------
//	CHECK for LOW/BIG ENDIAN (INSPIRED)
// -------------------------------------------------------------------------------------------
#if defined(__BYTE_ORDER__) && (__BYTE_ORDER__ == __ORDER_BIG_ENDIAN__)
	#define CPU_BIGENDIAN
#elif defined(__BYTE_ORDER__) && (__BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__)
	#define CPU_LOWENDIAN
#elif defined(__sparc) || defined(__sparc__) || \
      defined(_POWER) || defined(__powerpc__) || \
      defined(__ppc__) || defined(__hppa) || \
      defined(__PPC__) || defined(__PPC64__) || \
      defined(_MIPSEB) || defined(__ARMEB__) || \
      defined(__s390__) || \
      (defined(__sh__) && defined(__BIG_ENDIAN__)) || \
      (defined(__ia64) && defined(__BIG_ENDIAN__))
	#define CPU_BIGENDIAN
#else
	#define CPU_LOWENDIAN
#endif

// -------------------------------------------------------------------------------------------
// ASSERT: VALID COMPILATION OPTIONS:
// -------------------------------------------------------------------------------------------
#if !defined (CPU_LOWENDIAN)
	static_assert(false, "This code is for a LOWENDIAN CPU");
#endif

// -------------------------------------------------------------------------------------------
//	Automatically Select Platform to Compile: (WINDOWS_PLATFORM / LINUX_PLATFORM / ANDROID_PLATFORM)
// -------------------------------------------------------------------------------------------
/* Windows, both 32-bit and 64-bit */
#if defined(_WIN32) || defined(WIN32) || defined(_WIN64) || defined(WIN64) || \
    defined(__WIN32__) || defined(__TOS_WIN__) || defined(__WINDOWS__)
	#define WINDOWS_PLATFORM
#endif

#if defined(_WIN32) /*MSVC*/ || defined (__WINDOWS__) /*Watcom C/C++*/ || defined (__WIN32__) /*BORLANDC ++*/
  #if defined _XBOX_ONE
	#define XBOX_ONE_PLATFORM	//BUILD_FOR_XBOX_ONE
	#error "WOMA COMPILATION ERROR: This platform is not Supported yet."
  #elif defined _XBOX
	#if _XBOX_VER >= 200
		#define XENON_PLATFORM	//BUILD_FOR_XBOX360 (XENON)
		#error "WOMA COMPILATION ERROR: This platform is not Supported yet."
	#else
		#define XBOX_PLATFORM	//BUILD_FOR_XBOX
		#error "WOMA COMPILATION ERROR: This platform is not Supported yet."
	#endif	
  #endif
#elif defined(ANDROID) || defined(__ANDROID__)
	#define ANDROID_PLATFORM	//BUILD_FOR_ANDROID
#elif defined(_PS3) || defined(__PS3__) 
	#define PS3_PLATFORM		//BUILD_FOR_PS3
	#error "WOMA COMPILATION ERROR: This platform is not Supported yet."
#elif defined(_PS4) || defined(__PS4__) 
	#define PS4_PLATFORM		//BUILD_FOR_PS4
	#error "WOMA COMPILATION ERROR: This platform is not Supported yet."
#elif defined(_PS5) || defined(__PS5__) 
	#define PS5_PLATFORM		//BUILD_FOR_PS5
	#error "WOMA COMPILATION ERROR: This platform is not Supported yet."
#elif defined(__CYGWIN__) || defined(__CYGWIN32__)
	#define CYGWIN_PLATFORM		// BUILD_FOR_CYGWIN
	#define LINUX_PLATFORM		// Note: Using until now same as LINUX
#elif defined(__OpenBSD__) || defined(__NetBSD__) || defined(__FreeBSD__)
	#define BSD_PLATFORM		//BUILD_FOR_BSD
	#error "WOMA COMPILATION ERROR: This platform is not Supported yet."
#elif defined(__linux__) || defined(__unix__) || defined(__unix)
	#define LINUX_PLATFORM		//BUILD_FOR_LINUX
#endif
#if defined __APPLE__
	#include "TargetConditionals.h"

	#if defined TARGET_OS_IPHONE || defined TARGET_IPHONE_SIMULATOR
		#define OS_IPHONE_PLATFORM	//BUILD_FOR_IOS
		#error "WOMA COMPILATION ERROR: This platform is not Supported yet."
	#elif defined(__MACH__) || defined(__DARWIN__)
		#define OSX_PLATFORM		//BUILD_FOR_MAC
		#error "WOMA COMPILATION ERROR: This platform is not Supported yet."
	#endif
#endif

// -------------------------------------------------------------------------------------------
// ASSERT: VALID COMPILATION OPTIONS:
// -------------------------------------------------------------------------------------------
// LOG WINDOWS:
#if (defined CPU_X86 || defined X64) && defined WINDOWS_PLATFORM
	#if defined X64
		#ifndef disable_bin_compile_message_for_WINDOWS_PLATFORM_X64
		#pragma message( "TARGET: CPU_X64 on WINDOWS_PLATFORM" )  
		#endif
	#else
		#pragma message("TARGET: CPU_x86 on WINDOWS_PLATFORM")  
	#endif
#endif

// LOG LINUX:
#if (defined CPU_X86 || defined X64) && defined LINUX_PLATFORM
	#if defined X64
		#pragma message ("TARGET: CPU_X64 on LINUX_PLATFORM")
	#else
		#pragma message ("TARGET: CPU_x86 on LINUX_PLATFORM")
	#endif
#endif

// LOG ANDROID:
#if (defined CPU_X86 || defined X64) && defined ANDROID_PLATFORM
	#if defined X64
		#pragma message ("TARGET: CPU_X64 on ANDROID_PLATFORM")
	#else
		#pragma message ("TARGET: CPU_x86 on ANDROID_PLATFORM")
	#endif
#endif

#if defined CPU_ARM32 && defined ANDROID_PLATFORM
	#pragma message ("TARGET: CPU_ARM32 on ANDROID_PLATFORM")
#endif

#if defined CPU_ARM64 && defined ANDROID_PLATFORM
	#pragma message ("TARGET: CPU_ARM64 on ANDROID_PLATFORM")
#endif

// ASSERT one valid PLATFORM Selected:
#if (!defined (WINDOWS_PLATFORM)) && (!defined (LINUX_PLATFORM)) && (!defined (ANDROID_PLATFORM))
	#error "WOMA COMPILATION ERROR: Only 1, target Platform can be select to COMPILE!"
#endif

#if defined WINDOWS_PLATFORM
	# define WOMA_NEWLINE "\r\n"
#else
	# define WOMA_NEWLINE "\n"
#endif

// -------------------------------------------------------------------------------------------
//	Select OS GUI API:
// -------------------------------------------------------------------------------------------
#if defined WINDOWS_PLATFORM
	#define WIN32_GUI
#endif

#ifdef LINUX_PLATFORM
	#define GTK_GUI
#endif

#ifdef ANDROID_PLATFORM
	#define SDK_GUI
#endif

// ASSERT: proper OS-GUI selected:
#if defined (WINDOWS_PLATFORM) && !defined (WIN32_GUI)
	#error "WOMA COMPILATION ERROR: WINDOWS PLATFORM ONLY SUPPORT WIN32_GUI"
#endif

#if defined (LINUX_PLATFORM) && !defined (GTK_GUI)
	#error "WOMA COMPILATION ERROR: LINUX PLATFORM ONLY SUPPORT GTK_GUI"
#endif

#if defined (ANDROID_PLATFORM) && !defined (SDK_GUI)
	#error "WOMA COMPILATION ERROR: ANDROID PLATFORM ONLY SUPPORT SDK_GUI"
#endif

// -------------------------------------------------------------------------------------------
//	Auto-select "Render-driver" to Compile: DX12 / DX11 (dx11,dx10.1,dx10 and dx9.3) / OPENGL3.3+ / DX9
// -------------------------------------------------------------------------------------------
#if defined WINDOWS_PLATFORM	
	// Should be Compiled with: VS2010(for DX11) or VS2012(for DX11) or VS2013(for DX11) or VS2015(for DX12)
	#if !defined VER_PRODUCTMAJORVERSION
		#include <ntverp.h>				// Populate: VER_PRODUCTMAJORVERSION
	#endif

	// 64 bits WIN10 SDK + AVX2, VS2015: In Target Platform Windows 10 -> (Compile for DX12)
	#if VER_PRODUCTMAJORVERSION >= 10 && _MSC_VER >= 1900
		#ifndef WIN10
			#define WIN10					// Target Windows: Window 10!
		#endif
	#endif

	// ASSERT corect and valid SDK for WIN10:
	#if VER_PRODUCTMAJORVERSION == 6 && defined WIN10 && defined X64
		#error "Please Install/Select Windows 10 SDK, in order to compile for WIN10 & DX12 target." 
		// STEP1: Go to VS2015 MENU: File New Project / Visual C++ Windows / Universal Platforms (Install)
		// STEP2:	On Project General Settings select: toolset: v140 or better...
		//			On Project General Settings select: target platform: 10.0.xxxxx.0
	#endif
#endif

#if defined _USING_V110_SDK71_	// 32 bits WINXP SDK + SSE2, VS2010 or VS2012 (update4) For Windows XP (Sample: v110_xp/v120_xp/v140_xp)" XP Toolset is used? (Compile for DX9)
	// DX9sdk can be selected	// (Use DX-APIs: for DX9) for Windows XP Builds
	#ifndef WIN_XP
		#define WIN_XP			// Target Windows: Window XP! (NOTE: Cant use "WINXP" string already used by MS )
	#endif
#endif
#if _MSC_VER >= 1600			// 64 bits WIN6 SDK + AVX, Compiled in VS2010 or VS2012 or VS2013 or VS2015 or better TO USE (DX11)
	//DX9 can be selected
	#ifndef WIN6x
		#define WIN6x			// Target Windows: Vista, 7, 8 or 8.1
		#define DX9 	can be selected 
	#endif
#endif
#if VER_PRODUCTMAJORVERSION >= 10	// 64 bits WIN10 SDK + AVX2, VS2015: In Target Platform Windows 10 -> (Compile for DX12)
	#if _MSC_VER >= 1900
		// AVX2	 (i3/5/7 Haswell) = (Q2 2013) TARGET CODE: WIN10 64b+AVX2 API:DX12 (Level DX12.x)
		#if (defined __AVX512F__ || defined __AVX512__ || defined __AVX__ || defined __AVX2__)
			#define DX11	can be selected DX11.x, DX10.x and DX9.x
			#define DX12	can be selected DX12.x
		#else
			#define DX9
			#define DX11	can be selected DX11.x, DX10.x and DX9.x
		#endif
	#endif
#endif

// Select OPENGL-APIs to COMPILE:
// -------------------------------------------------------------------------------------------
// (Windows: Vista, 7 & 8) or Linux? ---> Allow OpenGL 3.3+ & 4.0
#if defined WIN6x || defined LINUX_PLATFORM 
	#define OPENGL3  //OPENGL-API: 3.3+ ~ DX10 for Microsoft Windows / Mac OS X / Linux
#endif

#if defined WIN10 || defined LINUX_PLATFORM 
	#define OPENGL40 //OPENGL-API: 4.0  ~ DX11 for Microsoft Windows / Mac OS X / Linux	
#endif

// Android? ---> Allow GLES2
#if defined ANDROID_PLATFORM
	#include <android/api-level.h>

	// Location of the __ANDROID_API__ define
	// #include: /tmp/ndk-arm/sysroot/usr/include/android/api-level.h
	#if !defined (__ANDROID_API__)
		# error __ANDROID_API__ must be defined
	#endif

	#if defined __ANDROID_API__ && __ANDROID_API__ >= 21
		#define GLES31	//3.1 ~ DX11 - Android 5.0 (API level 21+) - for Android / BlackBerry / iOS / Symbian
	#elif defined __ANDROID_API__ && __ANDROID_API__ >= 18
		#define GLES3	//3.0 ~ DX11 - Android 4.3 (API level 18+) - for Android / BlackBerry / iOS / Symbian
	#elif defined __ANDROID_API__ && __ANDROID_API__ >= 8
		#define GLES2	//2.0 ~ DX11 - Android 2.2 (API level 8+) - for Android / BlackBerry / iOS / Symbian
	#else
			#error "MIN: __ANDROID_API__" is 9
	#endif
		
	// NOTE: Google's "Almost Native Graphics Layer Engine" (ANGLE) project provides a means to convert OpenGL ES 2.0 application calls to DirectX 
#endif

// ASSERT (Render-System API DRIVERs): Check at-least for one driver:
#if !defined (DX9) && !defined (DX11) && !defined (DX12) && \
	!defined (GLES2) && !defined (GLES3) && !defined (GLES31) && \
	!defined (OPENGL21) && !defined (OPENGL3) && !defined (OPENGL40)
	#error "WOMA COMPILATION ERROR: At least one Render-System have to be Selected to COMPILE!"
#endif

// -------------------------------------------------------------------------------------------
// ASSERT BIN Build Check:
// -------------------------------------------------------------------------------------------
// ASSERT: Only Allow WinXp in 32 bits:
#if defined X64 && defined WIN_XP
	static_assert(false, "WIN_XP: Must be compiled in 32bits");
#endif

#if defined WIN6x
	#if (defined X64 || defined WIN32)
		// Allow 32 and 64 bits: For WIN6x
	#else
		static_assert(false, "WIN6x: X64 or WIN32, have to be selected");
	#endif
#endif

#define BIG_ENDIAN 0
#define LITTLE_ENDIAN 1

//LET USER DECIDE ON: ###core_engine_level.h
#undef DX9
#undef DX11
#undef DX12
#undef GLES2
#undef GLES3
#undef GLES31
#undef OPENGL21
#undef OPENGL3
#undef OPENGL40

// -------------------------------------------------------------------------------------------
// Windows Platforms Define (Internal-Version):
// -------------------------------------------------------------------------------------------
#define _WindowsXP32b_	5.1
#define _WindowsXP64b_	5.2
#define _Windows_Vista_ 6.0
#define _Windows_7_		6.1
#define _Windows_8_		6.2
#define _Windows_8_1_	6.3
#define _Windows_10_   10.0

// -------------------------------------------------------------------------------------------
// Define Compilation Time:
// -------------------------------------------------------------------------------------------
#define BUILD_YEAR_CH0 (__DATE__[ 7])
#define BUILD_YEAR_CH1 (__DATE__[ 8])
#define BUILD_YEAR_CH2 (__DATE__[ 9])
#define BUILD_YEAR_CH3 (__DATE__[10])

#define BUILD_MONTH_IS_JAN (__DATE__[0] == 'J' && __DATE__[1] == 'a' && __DATE__[2] == 'n')
#define BUILD_MONTH_IS_FEB (__DATE__[0] == 'F')
#define BUILD_MONTH_IS_MAR (__DATE__[0] == 'M' && __DATE__[1] == 'a' && __DATE__[2] == 'r')
#define BUILD_MONTH_IS_APR (__DATE__[0] == 'A' && __DATE__[1] == 'p')
#define BUILD_MONTH_IS_MAY (__DATE__[0] == 'M' && __DATE__[1] == 'a' && __DATE__[2] == 'y')
#define BUILD_MONTH_IS_JUN (__DATE__[0] == 'J' && __DATE__[1] == 'u' && __DATE__[2] == 'n')
#define BUILD_MONTH_IS_JUL (__DATE__[0] == 'J' && __DATE__[1] == 'u' && __DATE__[2] == 'l')
#define BUILD_MONTH_IS_AUG (__DATE__[0] == 'A' && __DATE__[1] == 'u')
#define BUILD_MONTH_IS_SEP (__DATE__[0] == 'S')
#define BUILD_MONTH_IS_OCT (__DATE__[0] == 'O')
#define BUILD_MONTH_IS_NOV (__DATE__[0] == 'N')
#define BUILD_MONTH_IS_DEC (__DATE__[0] == 'D')

#define BUILD_MONTH_CH0 \
    ((BUILD_MONTH_IS_OCT || BUILD_MONTH_IS_NOV || BUILD_MONTH_IS_DEC) ? '1' : '0')

#define BUILD_MONTH_CH1 \
    ( \
        (BUILD_MONTH_IS_JAN) ? '1' : \
        (BUILD_MONTH_IS_FEB) ? '2' : \
        (BUILD_MONTH_IS_MAR) ? '3' : \
        (BUILD_MONTH_IS_APR) ? '4' : \
        (BUILD_MONTH_IS_MAY) ? '5' : \
        (BUILD_MONTH_IS_JUN) ? '6' : \
        (BUILD_MONTH_IS_JUL) ? '7' : \
        (BUILD_MONTH_IS_AUG) ? '8' : \
        (BUILD_MONTH_IS_SEP) ? '9' : \
        (BUILD_MONTH_IS_OCT) ? '0' : \
        (BUILD_MONTH_IS_NOV) ? '1' : \
        (BUILD_MONTH_IS_DEC) ? '2' : \
        /* error default */    '?' \
    )

#define BUILD_DAY_CH0 ((__DATE__[4] >= '0') ? (__DATE__[4]) : '0')
#define BUILD_DAY_CH1 (__DATE__[ 5])

#if defined LINUX_PLATFORM
	#define WOMA_CONSOLE_APPLICATION	// Allow: OS "CMD Line Console" VS Native "WINDOWS" or "X-WINDOWS"
#endif

#define MAX_STR_LEN 256		//Used by TCHAR Arrays:
#define CONSOLE_LOG_WIDTH 800


// -------------------------------------------------------------------------------------------
#if defined NDEBUG
	#define RELEASE // ON/OFF Comercial Version (Check Serials) RELEASE = NDEBUG + "Real" Client Path(s) with Pack(s)
#endif

#if defined UNICODE
	//UNICODE
#else
	//MULTI-BYTE
#endif

// -------------------------------------------------------------------------------------------
// Define WOMA Project "Settings/Features" that will be COMPILED depending of "ENGINE_LEVEL"
// -------------------------------------------------------------------------------------------
//#define RELEASE	//FORCE TO DEBUG A RELEASE bin!

#include "core_engine_level.h"

#if DX_ENGINE_LEVEL >= 19 && CORE_ENGINE_LEVEL == 10	//DX9 DX11+DX10 DX12 OPENGL3
	#define USE_THIS_GRAPHIC_CARD_ADAPTER 0
#endif

#if CORE_ENGINE_LEVEL < 10	//AFTER: #include "core_engine_level.h"
	#define WOMA_CONSOLE_APPLICATION
	#define WomaDriverClass void
#else
	#define WOMA_CONSOLE_APPLICATION
	//#define WOMA_WIN32_APPLICATION
#endif
</pre>
<hr>
<h2>standard_platform.h</h2>
<pre class="brush: cpp;">// -------------------------------------------------------------------------------------------------------------------------------------
// Filename: standard_platform.h
// --------------------------------------------------------------------------------------------
// World of Middle Age (WoMA) - 3D Multi-Platform ENGINE 2023
// --------------------------------------------------------------------------------------------
// Copyright(C) 2013 - 2023 Pedro Miguel Borges [pmborg@yahoo.com]
//
// This file is part of the WorldOfMiddleAge project.
//
// The WorldOfMiddleAge project files can not be copied or distributed for comercial use 
// without the express written permission of Pedro Miguel Borges [pmborg@yahoo.com]
// You may not alter or remove any copyright or other notice from copies of the content.
// The content contained in this file is provided only for educational and informational purposes.
// 
// Downloaded from : http://woma.servegame.com
// --------------------------------------------------------------------------------------------
// PURPOSE: DEFINE OS SPECIFIC HEADERS
// --------------------------------------------------------------------------------------------

#pragma once
#include "platform.h"

// Include: MS WINDOWS SPECIFIC HEADERS
// ------------------------------------------------------------------------------------------------
#define WIN32_LEAN_AND_MEAN			// Exclude APIs such as Cryptography, DDE, RPC, Shell, and "Windows Sockets"!
#define NOCOMM						// Excludes the serial communication API.
#define _CRT_SECURE_NO_WARNINGS		// Ignore: warning C4996
#pragma warning( disable : 4098 )	// warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library
#pragma warning( disable : 4297 )	// warning C4297: 'WinMain' : function assumed not to throw an exception but do (ONCE WE USE MINI DUMPER WE DONT NEED THIS!)
#pragma warning( disable : 4091 )	// warning C4091 : 'typedef ' : ignored on left of '' when no variable is declared
#pragma warning( disable : 4995 )	//warning C4995: 'gets': name was marked as #pragma deprecated

// NOTE: Have to be on this order (1,2,3)!
#include <windows.h>// 1: Windows-specific header file for the C/C++ programming language which contains declarations for all of the functions in the Windows API
#include <tchar.h>	// 2: TCHAR (Windows header) to Support: ANSI & UNICODE
#include <strsafe.h>// 3: StringCchPrintf Secure Function to Replace: sprintf

// Provided by Microsoft Windows, which contains functions for manipulating file system directories
// -----------------------------------------------------------------------------------------------
#include <direct.h> // _chdir: 
#include <CommCtrl.h>
#include <io.h>			//_taccess()
// NOTE: Out of Memory raise exception: std::bad_alloc at memory location

// -------------------------------------------------------------------------------------------
// Include: COMMON c++ Libs:
// -------------------------------------------------------------------------------------------
// Advanced "String" Support + Advanced "file I/O" Support + Advanced "Vector" Support:
#include <sstream>	//wstring
#include <fstream>	//wifstream/wofstream
#include <iostream>
#include <vector>	//std::vector<int> Sample;
using namespace std;

// --------------------------------------------------------------------------------------------
// WOMA DEFINE: Strings and Files I/O
// --------------------------------------------------------------------------------------------
#ifdef UNICODE
#define OSTRINGSTREAM	std::wostringstream
#define STRINGSTREAM	std::wstringstream
#define STRING			std::wstring
#define IFSTREAM		std::wifstream
#define OFSTREAM		std::wofstream
#define FSTREAM			std::wfstream
#else
#define OSTRINGSTREAM	std::ostringstream
#define STRINGSTREAM	std::stringstream	// Use this way: (TCHAR*)ss.str().c_str()
#define STRING			std::string			// String str.c_str()
#define IFSTREAM		std::ifstream		// Input
#define OFSTREAM		std::ofstream		// Output
#define FSTREAM			std::fstream
#endif

// --------------------------------------------------------------------------------------------
// STANDARD DEFINE: Usefull Basic Interger Format:
// --------------------------------------------------------------------------------------------
#define u8	uint8_t
#define u16 uint16_t
#define u32 uint32_t

#define s8	int8_t
#define s16 int16_t
#define s32 int32_t

#define _HAS_STD_BYTE 0</pre>
<hr>
<h2>woma_macros.h</h2>
<pre class="brush: cpp;">// --------------------------------------------------------------------------------------------
// Filename: woma_macros.h
// --------------------------------------------------------------------------------------------
// World of Middle Age (WoMA) - 3D Multi-Platform ENGINE 2023
// --------------------------------------------------------------------------------------------
// Copyright(C) 2013 - 2023 Pedro Miguel Borges [pmborg@yahoo.com]
//
// This file is part of the WorldOfMiddleAge project.
//
// The WorldOfMiddleAge project files can not be copied or distributed for comercial use 
// without the express written permission of Pedro Miguel Borges [pmborg@yahoo.com]
// You may not alter or remove any copyright or other notice from copies of the content.
// The content contained in this file is provided only for educational and informational purposes.
// 
// Downloaded from : http://woma.servegame.com
// --------------------------------------------------------------------------------------------
//
// PURPOSE: DEFINE COMMON WorldOfMiddleAge 3D ENGINE MACROS
//
// --------------------------------------------------------------------------------------------
#pragma once

// --------------------------------------------------------------------------------------------
// ENGINE MACROS
// --------------------------------------------------------------------------------------------

// String Converters:
// --------------------------------------------------------------------------------------------
#ifdef UNICODE
	#define atow(strW,strA,lenA) MultiByteToWideChar( CP_ACP, 0, strA, -1, strW, lenA )     // "char" to "WCHAR" converter:
	#define wtoa(strA,strW,lenA) WideCharToMultiByte(CP_ACP,0,strW,-1,strA,lenA,NULL,NULL)  // "WCHAR" to "char" converter:
#else
	#define atow(strW,strA,lenA) strcpy_s(strW,lenA,strA)	// USE SAMPLE: TCHAR Wbuffer[MAX_STR_LEN]={ 0 };	atow(Wbuffer, buffer, MAX_STR_LEN);
	#define wtoa(strA,strW,lenA) strcpy_s(strA,lenA,strW)	// USE SAMPLE: CHAR Aip[MAX_STR_LEN]={ 0 };			wtoa(Aip, ip, MAX_STR_LEN);
#endif

// int to TCHAR*
// --------------------------------------------------------------------------------------------
	#ifdef UNICODE
		#define ItoA _itow
	#else
		#define ItoA _itoa
	#endif

// Save all aplication entry command line parameter:
// --------------------------------------------------------------------------------------------
#if !defined WOMA_WIN32_APPLICATION
	#define SYSTEM_SAVE_ARGS() { \
		ARGc = argc; \
		ARGv = argv; \
	}
#else
	#define SYSTEM_SAVE_ARGS() { \
		Scmdline = pScmdline; \
		Cmdshow =  iCmdshow; \
	}
#endif

// Global Statments - WOMA Checks
// --------------------------------------------------------------------------------------------
	#define IF_FAILED_RETURN_FALSE(x)	{ if( FAILED(x) ) { return false; } }		// Used with "HRESULT" IF FAILED

#define IF_NOT_RETURN_FALSE(x)			{ if( (!(x)) ) { return false; } }			// Used with "bool" IF NOT

#if _DEBUG
	#if defined VERBOSE_MEMORY_DEBUG
		#define IF_NOT_THROW_EXCEPTION(x) { WOMA_LOGManager_DebugMSG("[MEM_DEBUG] NEW %s CREATED!\n", #x); if (!x) WomaFatalException("Not Enough Memory!"); }
	#else
		#define IF_NOT_THROW_EXCEPTION(x) { if (!x) WomaFatalException("Not Enough Memory!"); }
	#endif
#else
	#define IF_NOT_THROW_EXCEPTION(x) ASSERT(x)
#endif

#define ASSERT(x) { if (!(x)) WomaFatalException("Assert failed!"); }

#define ThrowIfFailed(hr)\
{\
	if (FAILED(hr)) { WomaFatalException("Assert failed!"); }\
}

extern const wchar_t* GetWC(const char* c);

	#ifdef UNICODE
		#define WomaFatalExceptionW( wmsg ) { CHAR msg[MAX_STR_LEN]={ 0 }; wtoa(msg, wmsg, MAX_STR_LEN); throw exception(msg); } // TODO: String convert
	#endif
		#define WomaFatalException(msg) throw exception(msg)

	#if defined UNICODE
		#define WOMA_LOGManager_DebugMSGAUTO wprintf	//TCHAR
	#else
		#define WOMA_LOGManager_DebugMSGAUTO printf		//TCHAR
	#endif
	#define WOMA_LOGManager_DebugMSG printf				//CHAR
	#define WOMA_LOGManager_DebugMSGW wprintf			//WCHAR

// Class Loaders - for automatic class load log
// --------------------------------------------------------------------------------------------
#define LEVELHIGHLIGHT(level) {WOMA::ENGINE_LEVEL_USED = level; if (CORE_ENGINE_LEVEL == level) {HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE); SetConsoleTextAttribute(hConsole, BACKGROUND_INTENSITY|FOREGROUND_BLUE | FOREGROUND_INTENSITY);}}
#define LEVELNORMAL() { HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE); SetConsoleTextAttribute(hConsole, FOREGROUND_BLUE|FOREGROUND_GREEN|FOREGROUND_RED);}

#define CLASSLOADER() { HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE); SetConsoleTextAttribute(hConsole, FOREGROUND_GREEN); WOMA_LOGManager_DebugMSG((CHAR*) "[CLASS_LOAD %d] %s\n", CLASS_LOAD_N++, __FUNCTION__); SetConsoleTextAttribute(hConsole, FOREGROUND_RED + FOREGROUND_GREEN + FOREGROUND_BLUE); }
#define CLASSDELETE() { HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE); SetConsoleTextAttribute(hConsole, FOREGROUND_RED); WOMA_LOGManager_DebugMSG((CHAR*) "[CLASS_DELETE %d] %s\n", CLASS_DELETE_N++, __FUNCTION__); SetConsoleTextAttribute(hConsole, FOREGROUND_RED+FOREGROUND_GREEN+FOREGROUND_BLUE); }

// Basic OS low level MACROS:
// --------------------------------------------------------------------------------------------
	#define OS_REDRAW_WINDOW RedrawWindow(SystemHandle->m_hWnd, NULL, NULL, RDW_UPDATENOW | RDW_INVALIDATE| RDW_ERASE);  // Invoke: Window PAINT

		#define OS_KEY_DOWN(key) SystemHandle->m_OsInput->IsKeyDown(key)

// Global MEM HANDLERS - WOMA Macros:
// --------------------------------------------------------------------------------------------
#define KBs 1024
#define MBs (1024*KBs)
#define GBs (1024*MBs)

#define MAX(a,b)	(((a) > (b)) ? (a) : (b))
#define MIN(a,b)	(((a) < (b)) ? (a) : (b))

#ifndef SAFE_SHUTDOWN
	#if defined VERBOSE_MEMORY_DEBUG
		#define SAFE_SHUTDOWN(p) { if(p) { (p)->Shutdown(); WOMA_LOGManager_DebugMSGAUTO(TEXT("[MEM_DEBUG] SHUTDOWN %s\n"), #p); delete (p); (p)=NULL; } }
	#else
		#define SAFE_SHUTDOWN(p) { if(p) { (p)->Shutdown(); delete (p); (p)=NULL; } }
	#endif
#endif

#ifndef SAFE_RELEASE
	#if defined VERBOSE_MEMORY_DEBUG
		#define SAFE_RELEASE(p)  { if(p) { WOMA_LOGManager_DebugMSGAUTO(TEXT("[MEM_DEBUG] RELEASE %s\n"), #p); (p)->Release(); (p)=NULL; } }
	#else
		#define SAFE_RELEASE(p)  { if(p) { (p)->Release(); (p)=NULL; } }
	#endif
#endif

#ifndef SAFE_DELETE
	#if defined VERBOSE_MEMORY_DEBUG
		#define SAFE_DELETE(p)   { if(p) {  WOMA_LOGManager_DebugMSGAUTO(TEXT("[MEM_DEBUG] DELETE %s\n"), #p); delete (p); (p)=NULL; } }
	#else
		#define SAFE_DELETE(p)   { if(p) {  delete (p); (p)=NULL; } }
	#endif
#endif

#ifndef SAFE_DELETE_ARRAY
	#if defined VERBOSE_MEMORY_DEBUG
		#define SAFE_DELETE_ARRAY(p) { if(p) { WOMA_LOGManager_DebugMSGAUTO(TEXT("[MEM_DEBUG] DELETE_ARRAY %s\n"), #p); delete[] (p); (p)=NULL; } }
	#else
		#define SAFE_DELETE_ARRAY(p) { if(p) { delete[] (p); (p)=NULL; } }
	#endif
#endif

// Global GAME STOP!
// --------------------------------------------------------------------------------------------
	#define Publish_Quit_Message(){PostQuitMessage(WM_QUIT);}
</pre>
<hr>
<h2>OSengine.h</h2>
<pre class="brush: cpp;">// --------------------------------------------------------------------------------------------
// Filename: OSengine.h
// --------------------------------------------------------------------------------------------
// World of Middle Age (WoMA) - 3D Multi-Platform ENGINE 2023
// --------------------------------------------------------------------------------------------
// Copyright(C) 2013 - 2023 Pedro Miguel Borges [pmborg@yahoo.com]
//
// This file is part of the WorldOfMiddleAge project.
//
// The WorldOfMiddleAge project files can not be copied or distributed for comercial use 
// without the express written permission of Pedro Miguel Borges [pmborg@yahoo.com]
// You may not alter or remove any copyright or other notice from copies of the content.
// The content contained in this file is provided only for educational and informational purposes.
// 
// Downloaded from : http://woma.servegame.com
// --------------------------------------------------------------------------------------------
//
// PURPOSE: Add OS engine interfaces
//
// --------------------------------------------------------------------------------------------
#pragma once

#include "main.h"
extern int Command;

#include "winsystemclass.h"			// Are we a Windows Instance?
#define SYSTEM WinSystemClass	

#include <Shellapi.h>	// CommandLineToArgv()
#include <comdef.h>		// CoInitializeEx()

void OS_ENGINE_START(int argc, char* argv[]);
void OS_ENGINE_START(LPSTR pScmdline, int iCmdshow);
int ENGINE_RUN();
int START_3D_ENGINE();
void OS_ENGINE_STOP();

extern void ENGINE_STOP();
extern void START_OS_SYSTEM_KERNEL(int argc, char* argv[]);
extern void ENGINE_STOP_ALL();</pre>
<hr>
<h2>main.h</h2>
<pre class="brush: cpp;">// --------------------------------------------------------------------------------------------
// Filename: main.h
// --------------------------------------------------------------------------------------------
// World of Middle Age (WoMA) - 3D Multi-Platform ENGINE 2023
// --------------------------------------------------------------------------------------------
// Copyright(C) 2013 - 2023 Pedro Miguel Borges [pmborg@yahoo.com]
//
// This file is part of the WorldOfMiddleAge project.
//
// The WorldOfMiddleAge project files can not be copied or distributed for comercial use 
// without the express written permission of Pedro Miguel Borges [pmborg@yahoo.com]
// You may not alter or remove any copyright or other notice from copies of the content.
// The content contained in this file is provided only for educational and informational purposes.
// 
// Downloaded from : http://woma.servegame.com
// --------------------------------------------------------------------------------------------
//	PURPOSE: "main.h" include file for WoMA ENGINE.
//
//  DEFINE PLATFORM: Defaults
//  DEFINE UNIVERSAL C++: Code Conventions/Features for project
//  DEFINE GLOBAL - MACROS
//  DEFINE The Default Application Settings
// 	DEFINE woma_exception
// 	DEFINE minidumperClass
// 	DEFINE logManager
// --------------------------------------------------------------------------------------------
#pragma once

#define WOMAAUTHOR_ID		"Pedro Borges (pmborg@yahoo.com)"						// WoMA Engine: Author
#define WOMASERVER			"woma.servegame.com"									// Define: WOMA ENGINE HOME: (Server)

// -----------------------------------------------------------------------------------------
// DEFINE PLATFORM: Defaults
// -----------------------------------------------------------------------------------------
#pragma warning( disable : 4838 )
#define _CRT_SECURE_NO_WARNINGS		// Ignore: warning C4996
#include "platform.h"				// WOMA PLATFORM	- (Check OS: WINDOWS / LINUX / ANDROID)
#include "standard_platform.h"		// WOMA INCLUDES	- Standard Platform: INCLUDES
#include "woma_macros.h"			// WOMA MACROS		- COMMON WOMA ENGINE: MACROS
#include "default_settings_xml.h"	// DEFINE:			- The "default" run-time Settings

// -------------------------------------------------------------------------------------------
// Include: COMMON TRASNVERSAL WoMA Util Libs:
// -------------------------------------------------------------------------------------------

//	-------------------------------------------------------------------------------------------
// Global WOMA RUN-TIME SETTINGS:
//	-------------------------------------------------------------------------------------------
extern UINT CLASS_LOAD_N;
extern UINT CLASS_DELETE_N;

#define ENGINE_RESTART 100

namespace WOMA
{
	extern Settings settings;				// Main Settings: settings.h
	extern UINT		ENGINE_LEVEL_USED;

	// SUBSYSTEM:WINDOWS
	extern PSTR		Scmdline;
	extern int		Cmdshow;
	// SUBSYSTEM:CONSOLE
	extern int		ARGc;
	extern CHAR**	ARGv;

	extern TCHAR strConsoleTitle[MAX_STR_LEN];

}

</pre>
<hr>
<h2>SystemClass.h</h2>
<pre class="brush: cpp;">// --------------------------------------------------------------------------------------------
// Filename: systemclass.h
// --------------------------------------------------------------------------------------------
// World of Middle Age (WoMA) - 3D Multi-Platform ENGINE 2023
// --------------------------------------------------------------------------------------------
// Copyright(C) 2013 - 2023 Pedro Miguel Borges [pmborg@yahoo.com]
//
// This file is part of the WorldOfMiddleAge project.
//
// The WorldOfMiddleAge project files can not be copied or distributed for comercial use 
// without the express written permission of Pedro Miguel Borges [pmborg@yahoo.com]
// You may not alter or remove any copyright or other notice from copies of the content.
// The content contained in this file is provided only for educational and informational purposes.
// 
// Downloaded from : http://woma.servegame.com
// --------------------------------------------------------------------------------------------
//
// PURPOSE: Export APIs for systemclass.cpp which is the common OS API
//
// --------------------------------------------------------------------------------------------
#pragma once

#include "main.h"

////////////////////////////////////////////////////////////////////////////////
// Class name: SystemClass
////////////////////////////////////////////////////////////////////////////////
class SystemClass
{
public:
	SystemClass();
	~SystemClass();

	void Shutdown();

	WOMA::Settings* AppSettings;

public:

};


</pre>
<hr>
<h2>winSystemClass.h</h2>
<pre class="brush: cpp;">// --------------------------------------------------------------------------------------------
// Filename: winSystemClass.h
// --------------------------------------------------------------------------------------------
// World of Middle Age (WoMA) - 3D Multi-Platform ENGINE 2023
// --------------------------------------------------------------------------------------------
// Copyright(C) 2013 - 2023 Pedro Miguel Borges [pmborg@yahoo.com]
//
// This file is part of the WorldOfMiddleAge project.
//
// The WorldOfMiddleAge project files can not be copied or distributed for comercial use 
// without the express written permission of Pedro Miguel Borges [pmborg@yahoo.com]
// You may not alter or remove any copyright or other notice from copies of the content.
// The content contained in this file is provided only for educational and informational purposes.
// 
// Downloaded from : http://woma.servegame.com
// --------------------------------------------------------------------------------------------
//
// PURPOSE: Export APIs for winSystemClass.cpp which is the WINDOWS OS API
//
// --------------------------------------------------------------------------------------------
#pragma once

//////////////
// INCLUDES //
//////////////
#define _CRT_SECURE_NO_WARNINGS		// Ignore: warning C4996
#include "platform.h"
#include "SystemClass.h"

#include <combaseapi.h>				// VC7: ships with updated headers: CoInitializeEx()

#define WOMA_ENGINE_CLASS TEXT("WomaEngine2023")

#define m_contextDriver NULL

extern HWND DoCreateStatusBar(HWND hwndParent, int idStatus, HINSTANCE hinst, int cParts);

////////////////////////////////////////////////////////////////////////////////
// Class name: WinSystemClass
////////////////////////////////////////////////////////////////////////////////
class WinSystemClass : public SystemClass
{
public:
	WinSystemClass();
	WinSystemClass(WOMA::Settings* AppSettings);
	void WinSystemClass_init();
	~WinSystemClass();
	void Shutdown();

	bool InitializeSystem();
	int	 ApplicationMainLoop();

private:
	void ShutdownWindows();
};

/////////////
// GLOBALS //
/////////////
extern WinSystemClass* SystemHandle;

</pre>
<hr>
<h2>default_settings_xml.h</h2>
<pre class="brush: cpp;">// --------------------------------------------------------------------------------------------
// Filename: settings.h
// --------------------------------------------------------------------------------------------
// World of Middle Age (WoMA) - 3D Multi-Platform ENGINE 2023
// --------------------------------------------------------------------------------------------
// Copyright(C) 2013 - 2023 Pedro Miguel Borges [pmborg@yahoo.com]
//
// This file is part of the WorldOfMiddleAge project.
//
// The WorldOfMiddleAge project files can not be copied or distributed for comercial use 
// without the express written permission of Pedro Miguel Borges [pmborg@yahoo.com]
// You may not alter or remove any copyright or other notice from copies of the content.
// The content contained in this file is provided only for educational and informational purposes.
// 
// Downloaded from : http://woma.servegame.com
// --------------------------------------------------------------------------------------------
// PURPOSE: Define the structure of default settings when settings.xml file is missing.
//
// --------------------------------------------------------------------------------------------
#pragma once

#include "standard_platform.h"

#include <objbase.h>
#include <io.h>
#include <Shellapi.h>	// CommandLineToArgv()
#include <Wincon.h>		// SetConsoleTitle()

//NOTE: Sync With: SystemClass::LoadAllDrivers() (keep this order)
enum WomaDriver {	DRIVER_DX11=0,	// DRIVER_DX11  = DX10 or DX10.1 or DX11
					DRIVER_GL3,		// DRIVER_GL3   = OPENGL 3.3+ / OPENGL 4.0
					DRIVER_DX9,		// DRIVER_DX9   = DX11 with API for DX9
					DRIVER_DX12		// DRIVER_DX12  = DX12
};

//NOTE: The defaults settings, are beeing populated on: "main_settings.cpp" (SYNC)
namespace WOMA
{
	typedef struct {

		LANGID	id;
		int		Endian;

		// driver
		// -------------------------------------------------------------------------------------------
		int		DRIVER;
		int		UI_MONITOR;
		bool	UseAllMonitors;
		bool	UseDoubleBuffering;
		bool 	VSYNC_ENABLED;

		bool	MSAA_ENABLED;
		int		MSAA_X;

		// Texture
		// ------------------------------------------------------------------------------------------
		UINT	MaxTextureSize;
		bool	bilinear;
		bool	trilinear;
		bool	Anisotropic;
		int		AnisotropicLevel;

		// screen
		// -------------------------------------------------------------------------------------------
		bool	FULL_SCREEN;
		bool	AllowResize;

		int		WINDOW_Xpos;	//NOTE: Have to be "int" not UINT due other / used later on window position Calculations
		int		WINDOW_Ypos;
		int		WINDOW_Xpos_ori;
		int		WINDOW_Ypos_ori;
		int		WINDOW_WIDTH;	//NOTE: Have to be "int" not UINT due other / used later on window position Calculations
		int		WINDOW_HEIGHT;
		int		WINDOW_WIDTH_ori;
		int		WINDOW_HEIGHT_ori;
		int		BITSPERPEL;		// 15, 16, 32?

		// -----------------------------------------------------------------------------------------
		// Camera:
		float 	SCREEN_NEAR;
		float 	SCREEN_DEPTH;

		float	INIT_CAMX;
		float	INIT_CAMY;
		float	INIT_CAMZ;

		float	INIT_ROTX;
		float	INIT_ROTY;
		float	INIT_ROTZ;

		// ------------------------------------------------------------------------------------------
		// FOG
		float	START_FOG;
		float	END_FOG;

		// ------------------------------------------------------------------------------------------
		// SOUND
		bool	MUSIC_ENABLED;	// Background Music...
		bool	SOUND_ENABLED;	// Sound Effects...

		// Auto Detect:
		// ------------------------------------------------------------------------------------------
		int		SCREEN_RESOLUTION_WIDTH;  // Note: 0 eq. Auto detect Current Resolution
		int		SCREEN_RESOLUTION_HEIGHT; // Note: 0 eq. Auto detect Current Resolution

		// ------------------------------------------------------------------------------------------
		// TODO: Networking...
		bool			NETWORK_ENABLED;
		char			SERVER_ADDRESS[16]; //Allocate max string lenght possible: ___.___.___.___ 15+1
		unsigned short	SERVER_PORT;

	} Settings;
}

</pre>
</html>

